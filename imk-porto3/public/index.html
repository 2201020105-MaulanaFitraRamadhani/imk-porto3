<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portofolio Pribadi</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script defer src="main.js" type="module"></script>
  <script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
    const supabase = createClient('https://lvobywbpmssawuukzskm.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx2b2J5d2JwbXNzYXd1dWt6c2ttIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMTc4MDAsImV4cCI6MjA2NjY5MzgwMH0.Uk4RXPnrQq5wagaBzfPGH3Tf5qexktRIbHs0ovfXWxE');
    const session = await supabase.auth.getSession();
    const navList = document.querySelector('nav ul');
    const loginItem = navList.querySelector('li:last-child');
    if (session.data.session) {
      loginItem.innerHTML = '<a href="#" id="logout-link">Logout</a>';
      document.getElementById('logout-link').addEventListener('click', async () => {
        await supabase.auth.signOut();
        window.location.reload();
      });
    } else {
      loginItem.innerHTML = '<a href="login.html">Login</a>';
    }
  </script>
</head>
<body>
  <header class="navbar">
    <div class="container">
      <h1 class="logo">Portofolio</h1>
      <nav>
        <ul>
          <li><a href="#biodata">Biodata</a></li>
          <li><a href="#skills">Skill</a></li>
          <li><a href="#experience">Experience</a></li>
          <li><a href="#organization">Organisasi</a></li>
          <li><a href="#activity">Activity</a></li>
          <li><a href="#education">Education</a></li>
          <li><a href="#projects">Project</a></li>
          <li><a href="#articles">Articles</a></li>
          <li><a href="#contact">Contact</a></li>
          <li><a href="login.html">Login</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- Tambahkan di dalam <body> -->
    <section id="biodata" class="section">
      <h2>Biodata Singkat</h2>
      <img id="profile-img" src="https://via.placeholder.com/150" alt="Foto Profil" style="border-radius: 100px; width: 150px;" />
      <p id="bio-text">Memuat biodata...</p>
    </section>

    <section id="skills" class="section">
      <h2>Skill Set</h2>
      <ul id="skill-list"></ul>
    </section>

    <section id="experience" class="section">
      <h2>Pengalaman</h2>
      <div id="experience-timeline"></div>
    </section>

    <section id="organization" class="section">
      <h2>Organisasi</h2>
      <div id="organization-timeline"></div>
    </section>

    <section id="activity" class="section">
      <h2>Kegiatan</h2>
      <div id="activity-timeline"></div>
    </section>

    <section id="education" class="section">
      <h2>Pendidikan</h2>
      <ul id="education-list"></ul>
    </section>

    <section id="projects" class="section">
      <h2>Proyek</h2>
      <ul id="project-list"></ul>
    </section>


    <section id="articles" class="section">
      <h2>Artikel Terkait Proyek</h2>
      <div id="article-list"></div>
      <script>
        async function loadArticles() {
          const { data: articles, error } = await supabase.from('articles').select('*');
          const container = document.getElementById('article-list');
          container.innerHTML = '';
      
          articles.forEach(article => {
            container.innerHTML += `
              <div class="article-card">
                <img src="${article.image_url || 'https://via.placeholder.com/400x200'}" alt="Gambar Artikel" />
                <h3>${article.title}</h3>
                <p>${article.content}</p>
              </div>
            `;
          });
        }
      
        loadArticles();
      </script>
      <script type="module">
        import { loadProfileData } from './profile-load.js';
        loadProfileData();
      </script>      
    </section>

    <section id="contact" class="section">
      <h2>Contact Me</h2>
      <p>Email: kamu@email.com</p>
      <p>Instagram: @kamu</p>
      <p>Service Fee: Mulai dari Rp500.000 / proyek</p>
      <form id="contact-form">
        <label for="name">Nama</label>
        <input type="text" id="name" name="name" required>
      
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required>
      
        <label for="message">Pesan</label>
        <textarea id="message" name="message" rows="4" required></textarea>
      
        <button type="submit">Kirim</button>
      </form>
      
    </section>
    <script type="module" src="./contact-submit.js"></script>
    <script type="module" src="./load-articles.js"></script>
    <script type="module" src="./load-profile.js">
      import { loadProfileData } from './load-profile.js';
      loadProfileData();
    </script>
  </main>
</body>
</html>
