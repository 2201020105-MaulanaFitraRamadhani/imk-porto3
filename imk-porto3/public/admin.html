<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard Admin</title>
  <link rel="stylesheet" href="css/style.css"/>
</head>
<body>
  <div class="container">
    <h1>Dashboard Admin</h1>

    <!-- Tombol Kembali -->
    <a href="index.html" class="back-home">‚Üê Kembali ke Beranda</a>

    <!-- === SECTION: Edit Data Profil === -->
    <section class="section">
      <h2>Edit Data Profil</h2>
      <form id="profile-form">
        <label for="profilePhoto">Foto Profil:</label>
        <input type="file" id="profilePhoto" name="profilePhoto" accept="image/*"/>

        <label for="biodata">Biodata:</label>
        <textarea id="biodata" rows="3"></textarea>

        <label for="skills">Skill Set (pisahkan dengan koma):</label>
        <input type="text" id="skills" placeholder="Contoh: HTML, CSS, JavaScript"/>

        <label for="experience">Pengalaman:</label>
        <textarea id="experience" rows="3"></textarea>

        <label for="organization">Organisasi:</label>
        <textarea id="organization" rows="3"></textarea>

        <label for="activity">Kegiatan:</label>
        <textarea id="activity" rows="3"></textarea>

        <label for="education">Pendidikan (pisahkan dengan koma):</label>
        <input type="text" id="education" />

        <label for="projects">Proyek (pisahkan dengan koma):</label>
        <input type="text" id="projects" />

        <button type="submit">Simpan Perubahan</button>
      </form>
    </section>

    <!-- === SECTION: Tambah Artikel === -->
    <section class="section">
      <h2>Tambah Artikel</h2>
      <form id="article-form">
        <label for="articleTitle">Judul Artikel:</label>
        <input type="text" id="articleTitle" required/>

        <label for="articleImage">URL Gambar atau Upload:</label>
        <input type="url" id="articleImage" placeholder="https://example.com/image.jpg" />

        <label for="articleContent">Isi Artikel:</label>
        <textarea id="articleContent" rows="4" required></textarea>

        <button type="submit">Tambah Artikel</button>
      </form>
    </section>

    <!-- === SECTION: Tabel Pesan Kontak === -->
    <section class="section">
      <h2>Pesan dari Kontak</h2>
      <table id="contact-table" border="1" style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr>
            <th>Nama</th>
            <th>Email</th>
            <th>Pesan</th>
            <th>Tanggal</th>
          </tr>
        </thead>
        <tbody>
          <script>
            // === Tampilkan Data dari Tabel Kontak ===
            async function loadContacts() {
              const tableBody = document.querySelector('#contact-table tbody');
              const { data, error } = await supabase.from('contacts').select('*').order('created_at', { ascending: false });

              if (error) {
                tableBody.innerHTML = `<tr><td colspan="4">Gagal memuat data</td></tr>`;
                return;
              }

              if (data.length === 0) {
                tableBody.innerHTML = `<tr><td colspan="4">Belum ada pesan</td></tr>`;
                return;
              }

              tableBody.innerHTML = '';
              data.forEach(msg => {
                const row = `<tr>
                  <td>${msg.name}</td>
                  <td>${msg.email}</td>
                  <td>${msg.message}</td>
                  <td>${new Date(msg.created_at).toLocaleString()}</td>
                </tr>`;
                tableBody.innerHTML += row;
              });
            }

            loadContacts();
          </script>
        </tbody>
      </table>
    </section>
  </div>

  <script src="./supabase-client.js"></script>
  <script src="./admin.js"></script>
</body>
</html>
